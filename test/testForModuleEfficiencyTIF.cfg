process DQMOnlineSimData = {
    
    #-------------------------------------------------
    # Messages
    #-------------------------------------------------
    
    service = MessageLogger {
	untracked vstring destinations = { "debug.txt" }
	untracked PSet debug.txt = { untracked string threshold = "DEBUG"    }
	#	untracked vstring debugModules   = {"SiStripMonitorTrack"}
	untracked vstring debugModules    = { "siStripMonitorTrackEfficiency" , "siStripClusters" }
    }
    
    #-------------------------------------------------
    # Magnetic Field
    #-------------------------------------------------
    
    include "Configuration/GlobalRuns/data/ForceZeroTeslaField.cff"
    
    #-------------------------------------------------
    # Geometry
    #-------------------------------------------------
    
    # tracker geometry with (mis)alignment
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    #replace TrackerDigiGeometryESModule.applyAlignment = true   
    
    # tracker numbering
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    
    # cms geometry
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    
    #-------------------------------------------------
    # Calibration
    #-------------------------------------------------
    include "CalibTracker/SiStripESProducers/data/SiStripQualityFakeESSource.cfi"
    replace siStripQualityFakeESSource.appendToDataLabel="qualityforCluster"
    include "CalibTracker/SiStripESProducers/data/SiStripQualityConfigurableFakeESSource.cfi"    
    replace siStripQualityConfigurableFakeESSource.appendToDataLabel=""
    es_prefer  siStripQualityConfigurableFakeESSource= SiStripQualityConfigurableFakeESSource {}


    //include "Configuration/StandardSequences/data/FakeConditions.cff"
    include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorAny.cfi"
    include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorAlong.cfi"
    include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorOpposite.cfi"
    include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEESProducers.cff" 
    
    include "CalibTracker/Configuration/data/SiPixel_FakeConditions.cff"
    include "CalibTracker/Configuration/data/Tracker_FrontierConditions_TIF_21X.cff"
    
    es_source BeamSpotEarlyCollision = PoolDBESSource {
	string connect =
	"frontier://Frontier/CMS_COND_20X_BEAMSPOT"
	PSet DBParameters = {
	    untracked int32 messageLevel = 0
	}
	VPSet toGet = {
	    { string record = "BeamSpotObjectsRcd"
		string tag = "EarlyCollision_5p3cm_mc" }
	}
	string timetype = "runtime"
    }
    
    #-------------------------------------------------
    # Reconstruction
    #-------------------------------------------------
    
    include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
    replace siStripDigis.ProductLabel="source"
    
    service = UpdaterService {}
    
    # tracker
    include "RecoLocalTracker/Configuration/data/RecoLocalTracker_Cosmics.cff"
    include "RecoTracker/Configuration/data/RecoTrackerP5.cff"
    include "RecoVertex/BeamSpotProducer/data/BeamSpot.cff"

    #sequence tracksP5 = {cosmictracksP5, ctftracksP5, rstracksP5}
    replace siStripClusters.SiStripQualityLabel="qualityforCluster"
    replace CTF_P5_MeasurementTracker.UseStripModuleQualityDB = true
    replace CTF_P5_MeasurementTracker.UseStripAPVFiberQualityDB = false
    replace CTF_P5_MeasurementTracker.UseStripStripQualityDB = false
    replace CTF_P5_MeasurementTracker.DebugStripModuleQualityDB = true
    replace CTF_P5_MeasurementTracker.DebugStripAPVFiberQualityDB = false
    replace CTF_P5_MeasurementTracker.DebugStripStripQualityDB = false     

/*
    replace RS_P5_MeasurementTracker.UseStripModuleQualityDB = true
    replace RS_P5_MeasurementTracker.UseStripAPVFiberQualityDB = false
    replace RS_P5_MeasurementTracker.UseStripStripQualityDB = false
    replace RS_P5_MeasurementTracker.DebugStripModuleQualityDB = true
    replace RS_P5_MeasurementTracker.DebugStripAPVFiberQualityDB = false  
    replace RS_P5_MeasurementTracker.DebugStripStripQualityDB = false     
*/
    sequence trackerGR = {offlineBeamSpot,  striptrackerlocalreco, ctftracksP5}
    
    
    
    #-------------------------------------------------
    #-------------------------------------------------
    # DQM
    #-------------------------------------------------
    #-------------------------------------------------
    
    include "DQMServices/Core/data/DQM.cfg"
    include "DQM/SiStripMonitorClient/data/SiStripDQMTier0GlobalRun.cff"
    include "DQM/SiStripMonitorTrack/data/SiStripMonitorTrackEfficiency.cff"
    replace siStripMonitorTrackEfficiency.FolderName = "SiStrip/Tracks"
    
    
    #-------------------------------------------------
    # In-/Output
    #-------------------------------------------------
    
    # input
    source = PoolSource {
	untracked vstring fileNames = {
	    'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.0.root'
	}
    }
    untracked PSet maxEvents = {
	untracked int32 input = 1
    }
    
    # output
    module out = PoolOutputModule {
	untracked string fileName = "SiStripDQM_Tier0GlobalRun.root"
	untracked PSet options = {
	    untracked bool wantSummary = true
	}
    }
    
    #-------------------------------------------------
    # General Options
    #-------------------------------------------------
    
    untracked PSet options = {
	untracked bool wantSummary = true 
    }
    
    #-------------------------------------------------
    # Scheduling
    #-------------------------------------------------
    module dumpinfo = EventContentAnalyzer {}
    
    path p = {
	siStripDigis, 
	trackerGR,   
	# from "DQM/SiStripMonitorClient/data/SiStripDQMTier0.cff"
	DQMSiStripMonitorTrackEfficiency_Real ,
#	TrackMon_ckf,
	dumpinfo #,
#	SiStripDQMTest
    }
    
    module print = AsciiOutputModule {}
    endpath pout = { out, print}


}
